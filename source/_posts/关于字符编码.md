---
title: 关于字符编码
date: 2017-03-21 14:42:28
tags: other

---

## 关于字符编码

###1. 字符集和字符编码

&#160;&#160;&#160;&#160;各种文字和符号的总称为字符，多个字符集合为字符集，不同字符集包含字符个数不同，常见字符集有ASCII、ISO 8859、GB2312、BIG5、GB18030、Unicode等。

&#160;&#160;&#160;&#160;编码和字符集不同，字符集在传输的过程中需要进行编码，编码方式有UTF-8、UTF-16等等，字符变吗就是以二进制的数字来对应字符集的字符。

&#160;&#160;&#160;&#160;一般国家制定字符集和编码的时候都是同时进行的，平常说的GBK等有字符集和编码两层意思。

> Unicode字符集有多种编码方式，如UTF-8、UTF-16等；ASCII只有一种；

###2. 内码
&#160;&#160;&#160;&#160;内码指的是“将资讯编码后，透过某种方式储存在特定记忆装置时，装置内部的编码形式”。在不同的系统中，会有不同的内码。
在以往的英文系统中，内码为ASCII。在繁体中文系统中，目前常用的内码为大五码（Big5）。在简体中文系统中，内码则为国标码（国家标准代码：现在强制要求使用GB18030标准；较旧计算机仍然使用GB2312）。而统一码（Unicode）则为另一常见内码。

###3. 字符编码分类

####3.1 ASCII编码
&#160;&#160;&#160;&#160;ASCII（American Standard Code for Information Interchange，美国信息互换标准代码）是基于拉丁字母的一套电脑编码系统。[字符编码表](http://zh.wikipedia.org/zh-cn/ASCII)

- 单字节编码 ： 单字节字符串使用一个字节存放一个字符（SBCS,Single Byte Character System）。如："Bob123"占6个字节。
- 缺点 ： 只能显示26个字符、阿拉伯数字、英文标点

####3.2 ANSI编码
&#160;&#160;&#160;&#160;为了支持更多语言，通常使用0x800~xFF范围的两个字节来表示一个字符，例如“中”使用[0xD6,0xD0]这两个字节存储。不用国家制定了不同的标准，使用两个字节来表示一个字符的各种汉字延伸编码方式称为ANSI编码。简体中文系统下，ANSI编码代表GB2312编码。

####3.3 Unicode编码
&#160;&#160;&#160;&#160;为了国际间信息交流方便，制定了Unicode字符集，为每种语言中的字符设定了统一并唯一的数字编号。

&#160;&#160;&#160;&#160;Unicode字符集简写为UCS(Unicode Character Set)。早期的unicodeUnicode标准有UCS-2、UCS-4的说法。UCS-2用两个字节编码，UCS-4用4个字节编码。

### 4. 编码区别
#### 4.1 GB2312、GBK、GB18030

1. **GB2312**
	ASCII码中127号之后的奇异符号们直接取消掉, 规定：一个小于127的字符的意义与原来相同，但两个大于127的字符连在一起时，表示一个汉字，前面的一个字节（称之为高字节）从0xA1用到0xF7，后面一个字节（低字节）从0xA1到0xFE，这样我们就可以组合出大约7000多个简体汉字了。这就是常说的"全角"字符，而原来在127号以下的那些就叫"半角"字符了。这种汉字方案叫做 "GB2312"。GB2312 是对 ASCII 的中文扩展。兼容ASCII。
2. **GBK**
	不再要求低字节一定是127号之后的内码，只要第一个字节是大于127就固定表示这是一个汉字的开始，不管后面跟的是不是扩展字符集里的内容。对GB2312的扩展
3. **GB18030**
	在GBK基础上扩展了少数民族的文字

#### 4.2 UTF-8、UTF-16
&#160;&#160;&#160;&#160;Unicode中所有字符都使用一个"Unicode"进行表示，采用双字节编码，和单字节编码的ASCII编码不兼容。UTF即UCS Transformation Format，即UCS转换(传输)格式。是将Unicode编码规则和计算机的实际编码对应起来的规则，流行的UTF有两种，UTF-8和UTF-16。

1. **UTF-8**
| UCS-2编码(16进制)  | UTF-8 字节流(二进制) |
|--------|--------|
|    0000 - 007F    |    0xxxxxxx    |
|    0080 - 07FF    |    110xxxxx 10xxxxxx    |
|    0800 - FFFF    |   1110xxxx 10xxxxxx 10xxxxxx      |

&#160;&#160;&#160;&#160;例如“汉”字的Unicode编码是6C49。6C49在0800-FFFF之间，所以肯定要用3字节模板了：1110xxxx 10xxxxxx 10xxxxxx。将6C49写成二进制是：0110 110001 001001，用这个比特流依次代替模板中的x，得到：11100110 10110001 10001001，即E6 B1 89。

&#160;&#160;&#160;&#160;UTF-16以16位为单元对UCS进行编码。对于小于0x10000的UCS码，UTF-16编码就等于UCS码对应的16位无符号整数。对于不小于0x10000的UCS码，定义了一个算法。不过由于实际使用的UCS2，或者UCS4的BMP必然小于0x10000，所以就目前而言，可以认为UTF-16和UCS-2基本相同。但UCS-2只是一个编码方案，UTF-16却要用于实际的传输，所以就不得不考虑字节序的问题。

2. **UTF-16**

&#160;&#160;&#160;&#160;UTF-16以16位为单元对UCS进行编码。对于小于0x10000的UCS码，UTF-16编码就等于UCS码对应的16位无符号整数。对于不小于0x10000的UCS码，定义了一个算法。不过由于实际使用的UCS2，或者UCS4的BMP必然小于0x10000，所以就目前而言，可以认为UTF-16和UCS-2基本相同。但UCS-2只是一个编码方案，UTF-16却要用于实际的传输，所以就不得不考虑字节序的问题。

&#160;&#160;&#160;&#160;UTF-16不兼容ASCII。

###5. Unicaode和UTF

####6.1 UTF的字节序和BOM

#####6.1.1 字节序列
&#160;&#160;&#160;&#160;UTF-8以字节为编码单元，而UTF-16两个字节编码单元，解释UTF-16文本前，先要弄清每个编码单元的字节序。Unicode规范中推荐的标记字节顺序的方法是BOM，也就是Byte Order Mark。

&#160;&#160;&#160;&#160;在UCS编码中有一个叫做"ZERO WIDTH NO-BREAK SPACE"的字符，它的编码是FEFF。而FFFE在UCS中是不存在的字符，所以不应该出现在实际传输中。UCS规范建议我们在传输字节流前，先传输字符"ZERO WIDTH NO-BREAK SPACE"。这样如果接收者收到FEFF，就表明这个字节流是Big-Endian的；如果收到FFFE，就表明这个字节流是Little-Endian的。因此字符"ZERO WIDTH NO-BREAK SPACE"又被称作BOM。