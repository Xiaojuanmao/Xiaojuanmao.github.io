<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Xiaojuanmao&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Coding Life">
<meta property="og:type" content="website">
<meta property="og:title" content="Xiaojuanmao's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Xiaojuanmao's Blog">
<meta property="og:description" content="Coding Life">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Xiaojuanmao's Blog">
<meta name="twitter:description" content="Coding Life">
  
    <link rel="alternative" href="/atom.xml" title="Xiaojuanmao&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xiaojuanmao&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Life began in 1990</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-89_Gray Code" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/31/89_Gray Code/" class="article-date">
  <time datetime="2016-08-31T14:19:13.000Z" itemprop="datePublished">2016-08-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/31/89_Gray Code/">Gray Code</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="89-Gray_Code"><a href="#89-Gray_Code" class="headerlink" title="89.Gray Code"></a>89.Gray Code</h2><p>[TOC]</p>
<p>The gray code is a binary numeral system where two successive values differ in only one bit.</p>
<p>Given a non-negative integer n representing the total number of bits in the code, print the sequence of gray code. A gray code sequence must begin with 0.</p>
<p>For example, given n = 2, return [0,1,3,2]. Its gray code sequence is:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">00</span> - <span class="number">0</span></span><br><span class="line"><span class="number">01</span> - <span class="number">1</span></span><br><span class="line"><span class="number">11</span> - <span class="number">3</span></span><br><span class="line"><span class="number">10</span> - <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p><strong>Note</strong>:<br>For a given n, a gray code sequence is not uniquely defined.</p>
<p>For example, [0,2,3,1] is also a valid gray code sequence according to the above definition.</p>
<p>For now, the judge is able to judge based on one instance of gray code sequence. Sorry about that.</p>
<p>Subscribe to see which companies asked this question</p>
        
          <p class="article-more-link">
            <a href="/2016/08/31/89_Gray Code/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/31/89_Gray Code/" data-id="cisizqbgo0000f2ut2qvtqq41" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/">LeetCode</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-关于正则表达式(Regular Expression)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/19/关于正则表达式(Regular Expression)/" class="article-date">
  <time datetime="2016-08-19T05:00:45.000Z" itemprop="datePublished">2016-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="u5173_u4E8E_u6B63_u5219_u8868_u8FBE_u5F0F_28Regular_Expression_29"><a href="#u5173_u4E8E_u6B63_u5219_u8868_u8FBE_u5F0F_28Regular_Expression_29" class="headerlink" title="关于正则表达式(Regular Expression)"></a>关于正则表达式(Regular Expression)</h2><h3 id="u524D_u8A00"><a href="#u524D_u8A00" class="headerlink" title="前言"></a>前言</h3><p>&#160;&#160;&#160;&#160;昨天又复习了一遍正则，之前学的一些东西都已经忘光了，只记得当时刚入团队的时候接到的不知第几个新人任务，是用Python写一个爬虫，要在简书上爬取指定专栏的所有文章并按照规范写成Markdown的格式，涉及到一个过滤html标签并替换成md标签的操作。当时花了好久才从html标签里面用正则匹配到需要的资源…….昨天一下午，复习了一遍正则，写了个正则表达式，是干啥的我就不说了，说实话慢慢调的还是挺麻烦的，要各种情况覆盖 = =.</p>
<p>&#160;&#160;&#160;&#160;这篇记录只是想结合下面的那篇文章，再复习一下，大部分内容还是原文的，只是把自己的学习小感受记录下。</p>
<p>&#160;&#160;&#160;&#160;下面是很好的一篇文章<br>&#160;&#160;&#160;&#160;<a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="external">正则表达式30分钟入门教程</a></p>
<p>&#160;&#160;&#160;&#160;下面是很好的一个测试工具<br>&#160;&#160;&#160;&#160;<a href="http://tool.oschina.net/regex/" target="_blank" rel="external">正则表达式在线匹配工具</a></p>
<p>&#160;&#160;&#160;&#160;记录了如下的内容：</p>
<p>[TOC]</p>
<h3 id="u6B63_u5219_u7B80_u4ECB"><a href="#u6B63_u5219_u7B80_u4ECB" class="headerlink" title="正则简介"></a>正则简介</h3><p>&#160;&#160;&#160;&#160;正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。也就是用特殊的一些规范标记来定义自己想要的一个规则，来匹配想要的具有特征的字符串。在搜索的时候可能会用到<code>*</code>或者<code>.</code>来表示通配，也就是匹配任何字符，类似于这种符号的功效。</p>
<h3 id="u5143_u5B57_u7B26"><a href="#u5143_u5B57_u7B26" class="headerlink" title="元字符"></a>元字符</h3><p>&#160;&#160;&#160;&#160;元字符也就是组成横则表达式的基本单位，正则通过识别这些元字符以及一些特定组合来构建出一套匹配字符串的方法。下面表格记录了基本上所有的元字符，供查阅，还有些特殊的例如分支条件等等在后面单独记录。</p>
<table>
<thead>
<tr>
<th>元字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>将下一个字符标记为一个特殊字符、或一个原义字符、或一个 后向引用、或一个八进制转义符。例如，’n’ 匹配字符 “n”。’\n’ 匹配一个换行符。序列 ‘\‘ 匹配 “\” 而 “(“ 则匹配 “(“。</td>
</tr>
<tr>
<td>^</td>
<td>匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\n’ 或 ‘\r’ 之后的位置</td>
</tr>
<tr>
<td>$</td>
<td>匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\n’ 或 ‘\r’ 之前的位置</td>
</tr>
<tr>
<td>*</td>
<td>匹配前面的子表达式零次或多次。例如，zo<em> 能匹配 “z” 以及 “zoo”。 </em> 等价于{0,}</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}</td>
</tr>
<tr>
<td>?</td>
<td>匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 或 “does” 中的”do” 。? 等价于 {0,1}</td>
</tr>
<tr>
<td>{n}</td>
<td>n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o</td>
</tr>
<tr>
<td>{n,}</td>
<td>n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’</td>
</tr>
<tr>
<td>{n,m}</td>
<td>m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。刘， “o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格</td>
</tr>
<tr>
<td>?</td>
<td>当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 “oooo”，’o+?’ 将匹配单个 “o”，而 ‘o+’ 将匹配所有 ‘o’</td>
</tr>
<tr>
<td>.</td>
<td>匹配除 “\n” 之外的任何单个字符。要匹配包括 ‘\n’ 在内的任何字符，请使用象 ‘[.\n]’ 的模式</td>
</tr>
<tr>
<td>\b</td>
<td>匹配一个单词边界，也就是指单词和空格间的位置。例如， ‘er\b’ 可以匹配”never” 中的 ‘er’，但不能匹配 “verb” 中的 ‘er’</td>
</tr>
<tr>
<td>\B</td>
<td>匹配非单词边界。’er\B’ 能匹配 “verb” 中的 ‘er’，但不能匹配 “never” 中的 ‘er’</td>
</tr>
<tr>
<td>\cx</td>
<td>匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。 x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配一个数字字符。等价于 [0-9]</td>
</tr>
<tr>
<td>\D</td>
<td>匹配一个非数字字符。等价于 [^0-9]</td>
</tr>
<tr>
<td>\f</td>
<td>匹配一个换页符。等价于 \x0c 和 \cL</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符。等价于 \x0a 和 \cJ</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符。等价于 \x0d 和 \cM</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任何非空白字符。等价于 [^ \f\n\r\t\v]</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符。等价于 \x09 和 \cI</td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个垂直制表符。等价于 \x0b 和 \cK</td>
</tr>
<tr>
<td>\w</td>
<td>匹配包括下划线的任何单词字符。等价于’[A-Za-z0-9_]’</td>
</tr>
<tr>
<td>\W</td>
<td>匹配任何非单词字符。等价于 ‘[^A-Za-z0-9_]’</td>
</tr>
<tr>
<td>\xn</td>
<td>匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如， ‘\x41’ 匹配 “A”。’\x041’ 则等价于 ‘\x04’ &amp; “1”。正则表达式中可以使用 ASCII 编码</td>
</tr>
<tr>
<td>\num</td>
<td>匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，’(.)\1’ 匹配两个连续的相同字符</td>
</tr>
<tr>
<td>\n</td>
<td>标识一个八进制转义值或一个后向引用。如果 \n 之前至少 n 个获取的子表达式，则 n 为后向引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值</td>
</tr>
<tr>
<td>\nm</td>
<td>标识一个八进制转义值或一个后向引用。如果 \nm 之前至少有is preceded by at least nm 个获取得子表达式，则 nm 为后向引用。如果 \nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的后向引用。如果前面的条件都不满足，若  n 和 m 均为八进制数字 (0-7)，则 \nm 将匹配八进制转义值 nm</td>
</tr>
<tr>
<td>\nml</td>
<td>如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml</td>
</tr>
<tr>
<td>\un</td>
<td>匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \u00A9 匹配版权符号 (?)</td>
</tr>
</tbody>
</table>
<h3 id="u8F6C_u4E49"><a href="#u8F6C_u4E49" class="headerlink" title="转义"></a>转义</h3><p>&#160;&#160;&#160;&#160;字符转义应该是很常见的，java中经常需要各种转来转去的，源字符本身也可能需要得到匹配，这时候需要用到转义字符来将他们特殊的意义给取消掉，例如想匹配字符<code>*</code>，这时候不能直接写，需要写成<code>\*</code>，其他的转义方法也是相同的。</p>
<h3 id="u5B57_u7B26_u7C7B"><a href="#u5B57_u7B26_u7C7B" class="headerlink" title="字符类"></a>字符类</h3><p>&#160;&#160;&#160;&#160;字符类也就是一堆字符的集合，例如现在并不想匹配所有的小写字母，只想匹配其中的几个<code>a,b,c,d,e</code>，在方括号里面将他们包入即可,也能够快速的添加，例如想匹配所有的数字，不需要写<code>[0123456789]</code>，如果你愿意那也不是不可以，简单的写法为<code>[0-9]</code>,下面是几种使用的范例:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[abcde] 匹配abcde这些单个字符</span><br><span class="line">[<span class="number">0</span>-<span class="number">9</span>a-z] 匹配<span class="number">0</span>到<span class="number">9</span>以及所有的小写字母</span><br><span class="line">[。？！] 匹配句号、问号以及感叹号 注意在这个里面不需要加上转义</span><br></pre></td></tr></table></figure></p>
<h3 id="u5206_u652F_u6761_u4EF6"><a href="#u5206_u652F_u6761_u4EF6" class="headerlink" title="分支条件"></a>分支条件</h3><p>&#160;&#160;&#160;&#160;正则表达式里面提供了一种叫分支条件的形式，分支条件允许给出几种匹配的规则，只需要满足任意一个规则都算作是匹配成功，具体使用方法是将这些不同的匹配规则利用<code>|</code>符号分割开来：<code>0\d{2}-\d{8}|0\d{3}-\d{7}</code>,上面这个表达式匹配3位区号的电话号码，其中区号可以用小括号括起来，也可以不用，区号与本地号间可以用连字号或空格间隔，也可以没有间隔。</p>
<h3 id="u5206_u7EC4"><a href="#u5206_u7EC4" class="headerlink" title="分组"></a>分组</h3><p>&#160;&#160;&#160;&#160;在用正则的时候可能好不容易写好了一个比较长的局部正则表达式匹配规则，例如在匹配IP的时候，先分析IP的字符规则，IP的格式一般都是x.x.x.x这种，每个x代表的可能是一位、两位或者三位的数字，IP地址中每个数字都不能大于255. 01.02.03.04 这样前面带有0的数字也是IP地址, IP地址里的数字可以包含有前导0。我们在对IP进行正则表达式匹配规则编写的时候，可以将<code>.</code>这个符号算在前面一个数字中一起匹配，对最后一个数字单独处理，当然你也可以不这么做= =，仁者见仁智者见智。</p>
<p>&#160;&#160;&#160;&#160;单独匹配一个<code>x.</code>的正则可以这么写： <code>(2[0-4]\d|25[0-5]|[01]?\d\d?)\.</code>, 稍微解析一下：<br>&#160;&#160;&#160;&#160;可以看到用到了上面提到的分支条件，有三个分支，一个一个看</p>
<ol>
<li><strong>2[0-4]\d</strong><br> 这很明显是匹配三位数字的，而且还是以2开头的，中间一位在0到4中间选，最后一位随意，也就是从能匹配从200到249</li>
<li><strong>25[0-5]</strong><br> 第一位和第二位必须是2和5,第三位从0到5中选择，也就是从250到255</li>
<li><strong>[01]?\d\d?</strong><br> 第一位是0或者1或者没有，因为后面加上了一个<code>？</code>，表示可以有一个或者没有，后面的\d\d标识可以是从00到99,合起来就是从0匹配到199</li>
<li>前面三个连起来就是从0-255了，再加上后面一个<code>\.</code>转义匹配的点号</li>
</ol>
<ul>
<li><p><strong>默认分组</strong><br>&#160;&#160;&#160;&#160;上面那个正则表达式能够匹配0到255并后面加上一个小数点的字符串了，让这个正则表达式重复三次，再匹配一次最后一个不加上点的数字，就完美了。例如可以这么写：<code>((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)</code>。如果说想匹配的IP地址有点特殊，最后一位和前面需要重复，这时候能够换一种写法，正则提供了分组这个东西，能够让我们直接索引到前面已经创建好的分组，不用再复制粘贴一次了：<code>((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}\2</code>。&#160;&#160;&#160;&#160;可以用小括号来指定子表达式(也叫做分组)，从左往右边数，从1开始数起= =，因为0这个序号分配给了整个正则表达式了。</p>
</li>
<li><p><strong>自定分组</strong><br>&#160;&#160;&#160;&#160;除了利用上面的默认分组，还能自定义分组，要指定一个子表达式的组名，请使用这样的语法：<code>(?&lt;Word&gt;\w+)</code>(或者把尖括号换成’也行：<code>(?&#39;Word&#39;\w+))</code>,这样就把\w+的组名指定为Word了。要反向引用这个分组捕获的内容，你可以使用<code>\k&lt;Word&gt;</code>,所以上一个例子也可以写成这样：<code>\b(?&lt;Word&gt;\w+)\b\s+\k&lt;Word&gt;\b</code></p>
</li>
</ul>
<h3 id="u53CD_u4E49"><a href="#u53CD_u4E49" class="headerlink" title="反义"></a>反义</h3><p>&#160;&#160;&#160;&#160;有时候并不是都是想要匹配某个字符，当不想匹配某个字符串的时候就需要用到反义了，有下面这些用法：</p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\W</td>
<td>匹配任意不是字母，数字，下划线，汉字的字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符的字符</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词开头或结束的位置</td>
</tr>
<tr>
<td>[^x]</td>
<td>匹配除了x以外的任意字符</td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
</tr>
</tbody>
</table>
<p>&#160;&#160;&#160;&#160;例子：\S+匹配不包含空白符的字符串。<br>&#160;&#160;&#160;&#160;<a[^>]+&gt;匹配用尖括号括起来的以a开头的字符串。</a[^></p>
<h3 id="u5C0F_u62EC_u53F7_u7528_u6CD5"><a href="#u5C0F_u62EC_u53F7_u7528_u6CD5" class="headerlink" title="小括号用法"></a>小括号用法</h3><p>&#160;&#160;&#160;&#160;小括号的使用在一些特定的规则中还是挺有用的，下面这个表格记录了一些比较特殊的规则：</p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>(exp)</td>
<td>匹配exp,并捕获文本到自动命名的组里</td>
</tr>
<tr>
<td>(?<name>exp)</name></td>
<td>匹配exp,并捕获文本到名称为name的组里，也可以写成(?’name’exp)</td>
</tr>
<tr>
<td>(?:exp)</td>
<td>匹配exp,不捕获匹配的文本，也不给此分组分配组号</td>
</tr>
<tr>
<td>（？=exp）</td>
<td>匹配exp前面的位置（零宽正预测先行断言）</td>
</tr>
<tr>
<td>（?&lt;=exp）</td>
<td>匹配exp后面的位置（零宽正回顾后发断言）</td>
</tr>
<tr>
<td>(?!exp)</td>
<td>匹配后面跟的不是exp的位置</td>
</tr>
<tr>
<td>(?&lt;!exp)</td>
<td>匹配前面不是exp的位置</td>
</tr>
<tr>
<td>(?#comment)</td>
<td>注释</td>
</tr>
</tbody>
</table>
<h3 id="u65AD_u8A00"><a href="#u65AD_u8A00" class="headerlink" title="断言"></a>断言</h3><p>&#160;&#160;&#160;&#160;如果想查找在某些特定字符串之前或者之后的一小段字符串，则需要用到下面提到的四种断言，具体分为两类：零宽断言和负向零宽断言。</p>
<h4 id="u96F6_u5BBD_u65AD_u8A00"><a href="#u96F6_u5BBD_u65AD_u8A00" class="headerlink" title="零宽断言"></a>零宽断言</h4><ul>
<li><p><strong>零宽度正预测先行断言</strong><br>&#160;&#160;&#160;&#160;<code>(?=exp)</code>也叫<strong>零宽度正预测先行断言</strong>，它断言自身出现的位置的后面能匹配表达式exp。比如\b\w+(?=ing\b)，匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找I’m singing while you’re dancing.时，它会匹配sing和danc。</p>
</li>
<li><p><strong>零宽度正回顾后发断言</strong><br>&#160;&#160;&#160;&#160;<code>(?&lt;=exp)</code>也叫<strong>零宽度正回顾后发断言</strong>，它断言自身出现的位置的前面能匹配表达式exp。比如(?&lt;=\bre)\w+\b会匹配以re开头的单词的后半部分(除了re以外的部分)，例如在查找reading a book时，它匹配ading。</p>
</li>
</ul>
<h4 id="u8D1F_u5411_u96F6_u5BBD_u65AD_u8A00"><a href="#u8D1F_u5411_u96F6_u5BBD_u65AD_u8A00" class="headerlink" title="负向零宽断言"></a>负向零宽断言</h4><p>&#160;&#160;&#160;&#160;如果我们只是想要确保某个字符没有出现，但并不想去匹配它时就需要用到负向零宽断言了。</p>
<ul>
<li><p><strong>零宽度负预测先行断言</strong><br>&#160;&#160;&#160;&#160;<code>(?!exp)</code>，断言此位置的后面不能匹配表达式exp。例如：\d{3}(?!\d)匹配三位数字，而且这三位数字的后面不能是数字；\b((?!abc)\w)+\b匹配不包含连续字符串abc的单词。</p>
</li>
<li><p><strong>零宽度负回顾后发断言</strong><br>&#160;&#160;&#160;&#160;<code>(?&lt;!exp)</code>断言此位置的前面不能匹配表达式exp：(?&lt;![a-z])\d{7}匹配前面不是小写字母的七位数字。</p>
</li>
</ul>
<h3 id="u6CE8_u91CA"><a href="#u6CE8_u91CA" class="headerlink" title="注释"></a>注释</h3><p>&#160;&#160;&#160;&#160;小括号的另一种用途是通过语法(?#comment)来包含注释。例如：2[0-4]\d(?#200-249)|25<a href="/?#250-255">0-5</a>|[01]?\d\d?(?#0-199)。<br>&#160;&#160;&#160;&#160;要包含注释的话，最好是启用“忽略模式里的空白符”选项，这样在编写表达式时能任意的添加空格，Tab，换行，而实际使用时这些都将被忽略。启用这个选项后，在#后面到这一行结束的所有文本都将被当成注释忽略掉。例如，我们可以前面的一个表达式写成这样：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(?&lt;=    <span class="preprocessor"># 断言要匹配的文本的前缀</span></span><br><span class="line">&lt;(\w+)&gt; <span class="preprocessor"># 查找尖括号括起来的字母或数字(即HTML/XML标签)</span></span><br><span class="line">)       <span class="preprocessor"># 前缀结束</span></span><br><span class="line">.*      <span class="preprocessor"># 匹配任意文本</span></span><br><span class="line">(?=     <span class="preprocessor"># 断言要匹配的文本的后缀</span></span><br><span class="line">&lt;\/\<span class="number">1</span>&gt;  <span class="preprocessor"># 查找尖括号括起来的内容：前面是一个<span class="string">"/"</span>，后面是先前捕获的标签</span></span><br><span class="line">)       <span class="preprocessor"># 后缀结束</span></span><br></pre></td></tr></table></figure></p>
<h3 id="u5339_u914D_u6A21_u5F0F"><a href="#u5339_u914D_u6A21_u5F0F" class="headerlink" title="匹配模式"></a>匹配模式</h3><p>&#160;&#160;&#160;&#160;在没有规定匹配模式的情况下，正则表达式总是会贪婪的去匹配尽可能多的字符，例如<code>a.*b</code>这个正则表达式在匹配字符串<code>aabab</code>的时候结果为<code>aabab</code>，而我们可能需要更加懒惰的匹配规则，只要在它后面加上一个问号?。这样.<em>?就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。`a.</em>?b`匹配最短的，以a开始，以b结束的字符串。如果把它应用于aabab的话，它会匹配aab（第一到第三个字符）和ab（第四到第五个字符）。下面这个表格是懒惰限定符的一些用法：</p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*?</td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td>+?</td>
<td>重复1次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>??</td>
<td>重复0次或1次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>重复n到m次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,}?</td>
<td>重复n次以上，但尽可能少重复</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/19/关于正则表达式(Regular Expression)/" data-id="cis1ag3ae0000amutcqcfb3g1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Android中图片的加载" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/18/Android中图片的加载/" class="article-date">
  <time datetime="2016-08-18T14:02:49.000Z" itemprop="datePublished">2016-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Android_u4E2D_u56FE_u7247_u7684_u52A0_u8F7D"><a href="#Android_u4E2D_u56FE_u7247_u7684_u52A0_u8F7D" class="headerlink" title="Android中图片的加载"></a>Android中图片的加载</h2><h3 id="u524D_u8A00"><a href="#u524D_u8A00" class="headerlink" title="前言"></a>前言</h3><p>&#160;&#160;&#160;&#160;来北京之后变懒了，之前学到新的知识都会及时的总结并做好相关的记录，来了一个月没总结几次，每天的工作量并不大但人整个处于一种慵懒的状态。最近接触到了图片的加载方面一些问题，这些东西都被网上的大神们讲烂了，各种看博客学习了一段时间后，主要接触了这些关键词<code>ImageView Matrix Fresco Scalable Bitmap</code>,项目里面图片加载框架是Fresco,遇到了一个加载长图片的需求。</p>
<p>&#160;&#160;&#160;&#160;看到了图库里面炫酷的效果之后想实现下，但是刚开始并不知道从哪里下手，后面慢慢接触，学习的历程大概分为下面这几个步骤：</p>
<ul>
<li>手动加载图片</li>
<li>手动局部decode</li>
<li>自定义支持可拖拽、放缩的控件</li>
<li>结合Fresco以及自定义控件实现可放缩并自动加载图片</li>
<li>先加载一张粗略图，根据用户手势动态decode清晰图片(还没弄出来)</li>
</ul>
        
          <p class="article-more-link">
            <a href="/2016/08/18/Android中图片的加载/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/18/Android中图片的加载/" data-id="cis0edbkr0000zyutgeeo9sob" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-[译]ProtocolBuffers脚本生成代码" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/27/[译]ProtocolBuffers脚本生成代码/" class="article-date">
  <time datetime="2016-07-27T11:54:53.000Z" itemprop="datePublished">2016-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ProtocolBuffers_u811A_u672C_u751F_u6210_u4EE3_u7801"><a href="#ProtocolBuffers_u811A_u672C_u751F_u6210_u4EE3_u7801" class="headerlink" title="ProtocolBuffers脚本生成代码"></a>ProtocolBuffers脚本生成代码</h2><h3 id="u4ECE-pb_u6587_u4EF6_u751F_u6210_u7684_u5DE5_u5177_u7C7B"><a href="#u4ECE-pb_u6587_u4EF6_u751F_u6210_u7684_u5DE5_u5177_u7C7B" class="headerlink" title="从.pb文件生成的工具类"></a>从.pb文件生成的工具类</h3><hr>
<p>&#160;&#160;&#160;&#160;在上一篇中，定义好了message，选定制定语言并运行官方编译器即可生成能够使用的工具类，工具类中包括了get和set字段值，从序列化message到输出流以及从输入流中解析message的一系列方法。这里以Java为例，运行<a href="https://developers.google.com/protocol-buffers/docs/javatutorial">脚本</a>之后会为每一个message类型都生成一个<code>.java</code>文件。</p>
<p>&#160;&#160;&#160;&#160;从.pb文件生成.java只需要下面这一行脚本：<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">protoc</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">proto_path=src</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">java_out=build/gen</span> <span class="comment">src/foo</span><span class="string">.</span><span class="comment">proto</span></span><br></pre></td></tr></table></figure></p>
<p>&#160;&#160;&#160;&#160;脚本中包含一些元素：</p>
<ol>
<li><code>protoc</code> : 脚本命令，类似于java或javac一样</li>
<li><code>--proto_path=src</code> : 指定.pb文件文件所在的目录</li>
<li><code>--java_out=build/gen</code> : 指定.java文件输出的目录</li>
<li><code>src/foo.proto</code> : .pb文件的名称</li>
</ol>
<p>&#160;&#160;&#160;&#160;在执行脚本之前，还需要指定生成的.java文件名称，在.pb文件开头写上如下内容：<code>option java_outer_classname = &quot;Foo&quot;;</code>文件名称随意。</p>
        
          <p class="article-more-link">
            <a href="/2016/07/27/[译]ProtocolBuffers脚本生成代码/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/27/[译]ProtocolBuffers脚本生成代码/" data-id="cis0edbl20007zyutn023a903" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JitPack使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/27/JitPack使用/" class="article-date">
  <time datetime="2016-07-27T11:54:41.000Z" itemprop="datePublished">2016-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="JitPack"><a href="#JitPack" class="headerlink" title="JitPack"></a>JitPack</h2><p>&#160;&#160;&#160;&#160;从接触Android到现在也快有一年半的时间了，一直都在看看书写写自己的小项目，中途自己写了写博客总结自己遇到的一些坑以及小心得，发现在之后学习的过程中遇到类似的问题也能方便查阅温习。最近想把之前的写的一些工具整理一下，发到maven仓库上去，虽然东西没有很高大上，但总归是一次体验，以后说不定能造出什么好用的轮子。</p>
<h3 id="JitPack-io"><a href="#JitPack-io" class="headerlink" title="JitPack.io"></a><a href="https://jitpack.io/">JitPack.io</a></h3><blockquote>
<p>JitPack is a novel package repository for JVM and Android projects. It builds Git projects on demand and provides you with ready-to-use artifacts (jar, aar).<br>If you want your library to be available to the world there is no need to go through project build and upload steps. All you need to do is push your project to GitHub and JitPack will take care of the rest.</p>
</blockquote>
        
          <p class="article-more-link">
            <a href="/2016/07/27/JitPack使用/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/27/JitPack使用/" data-id="cis0edblo000zzyutkejzwgxe" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-寻找实习的小感受" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/23/寻找实习的小感受/" class="article-date">
  <time datetime="2016-04-23T11:54:23.000Z" itemprop="datePublished">2016-04-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/23/寻找实习的小感受/">寻找实习的小感受</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="u524D_u8A00"><a href="#u524D_u8A00" class="headerlink" title="前言"></a>前言</h3><p>&#160;&#160;&#160;&#160;从3月1号开始，磨磨蹭蹭到现在快将近一个半月的时间了，实习各种面试笔试也差不多接近尾声，其中还夹杂着两小波考试的轰炸，将近40天日夜来，心情跌宕起伏的，不过大部分时间都是塞塞的，好不容易抽了个周六的晚上来和自己谈谈心。</p>
<h3 id="u4E3A_u4EC0_u4E48_u627E_u5B9E_u4E60"><a href="#u4E3A_u4EC0_u4E48_u627E_u5B9E_u4E60" class="headerlink" title="为什么找实习"></a>为什么找实习</h3><p>&#160;&#160;&#160;&#160;作为一只标准的大三狗，按照标准剧情来发展，下学期一般都是在外面实习，所谓实习也就是跑到外面公司呆一段时间顺便看能不能顺点有用的东西回来，听说是在学校里面学不到的。<br>&#160;&#160;&#160;&#160;不知道在哪里听到的一句话，说“实习就像是婚前恋爱一样，在结婚之前先感受感受，以免结婚之后没有后悔的余地”。当时一听这话还是觉得挺逗的，如果自己以后上班的地方没办法适应啥的，将就将就是不行的，上班是个长久的活儿，像生活一样。</p>
<p>&#160;&#160;&#160;&#160;可后来想了想，好像实习这件事情和恋爱并不能这么笔划吧。跑出去见见世面也行啊，好多去实习并不是为了去那个公司工作做准备，说不定是为了去某个城市玩玩，顺便赚点路费啥的。好像又想了一下，那恋爱呢，好像好多人只是为了体验异性相处时候是什么感觉，或者只是为了嘿嘿嘿罢了，真尼玛纠结的样子，怎么想都行，自己有时候就是这样，想啥都来个正面，再来个反面，自己就在那里打架都可以打一年。</p>
<p>&#160;&#160;&#160;&#160;我也去尝试找了实习，内推投了小米、阿里、网易、微信，校招投了腾讯以及阿里，反正我找实习那真是为了工作，这点倒不假。麻麻今天都给我打电话了的，说让我考虑下读研的事情咯，我其实还是挺想读研的，只是现在由于某些不可抗拒的力量，我要去工作。</p>
        
          <p class="article-more-link">
            <a href="/2016/04/23/寻找实习的小感受/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/23/寻找实习的小感受/" data-id="cis0edbl00004zyute69hd8rv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/others/">others</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-运输层" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/31/运输层/" class="article-date">
  <time datetime="2016-03-31T09:15:11.000Z" itemprop="datePublished">2016-03-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/31/运输层/">运输层</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="u8FD0_u8F93_u5C42"><a href="#u8FD0_u8F93_u5C42" class="headerlink" title="运输层"></a>运输层</h2><p><strong>功能</strong> ： 为不同主机上运行的应用进程之间提供逻辑通信(logical communication)</p>
<p><strong>工作内容</strong></p>
<ul>
<li>发送方：把应用数据划分成报文段，交给网络层</li>
<li>接收方：将报文段重组成应用数据，交给应用层</li>
</ul>
<p><strong>运输层和网络层区别</strong></p>
<ul>
<li>网络层：不同主机之间的逻辑通信</li>
<li>运输层：应用进程之间的逻辑通信</li>
</ul>
<h3 id="u8FD0_u8F93_u5C42_u534F_u8BAE"><a href="#u8FD0_u8F93_u5C42_u534F_u8BAE" class="headerlink" title="运输层协议"></a>运输层协议</h3><ul>
<li>用户数据报协议UDP</li>
<li>传输控制协议TCP</li>
<li>所提供的服务<ul>
<li>进程间数据交付</li>
<li>差错检测</li>
<li>可靠的数据传输</li>
<li>拥塞控制</li>
</ul>
</li>
</ul>
        
          <p class="article-more-link">
            <a href="/2016/03/31/运输层/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/31/运输层/" data-id="cis0edbkv0001zyutdjcdgp51" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/net/">net</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java内存模型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/10/Java内存模型/" class="article-date">
  <time datetime="2016-03-10T06:46:58.000Z" itemprop="datePublished">2016-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/10/Java内存模型/">Java内存模型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="u5185_u5B58_u6A21_u578B_u7531_u6765"><a href="#u5185_u5B58_u6A21_u578B_u7531_u6765" class="headerlink" title="内存模型由来"></a>内存模型由来</h4><p>&#160;&#160;&#160;&#160;由于多任务处理的需求，在很多情况下计算机的运算能力强大了，低速的磁盘I/O或者网络通信或者数据库的操作访问完全跟不上CPU高速处理的节奏，这个时候出现了高速缓存这个东西来调节这两者之间的差距。</p>
<p>&#160;&#160;&#160;&#160;出现高速缓存之后又面临着一个问题，就是在主内存中和在高速缓存中存储的可能不是同一份数据，也就是不能保证<strong>缓存一致性(Cache Chherence)</strong>。在多处理器的系统中，每个处理器都有自己的高速缓存，而同时又共享一块主内存，这个时候没有一个标准是不行的。所以就出来了一系列的协议，读写的时候都根据协议来就不会出错了(例如MSI、MOSI等等)。而所谓的<strong>内存模型</strong>，可以暂时理解为在特定的操作协议之下，对特定内存或者高速缓存进行读写访问的过程抽象。</p>
<p><img src="http://7xrl39.com1.z0.glb.clouddn.com/Screenshot%20from%202016-03-10%2012%3A28%3A39.png" alt=""></p>
        
          <p class="article-more-link">
            <a href="/2016/03/10/Java内存模型/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/10/Java内存模型/" data-id="cis0edblp0010zyut4maggo2y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-EventBus解析-三-查找Subscribe方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/07/EventBus解析-三-查找Subscribe方法/" class="article-date">
  <time datetime="2016-03-07T08:24:12.000Z" itemprop="datePublished">2016-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/07/EventBus解析-三-查找Subscribe方法/">EventBus解析-三-查找Subscribe方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="u67E5_u627E_u8BA2_u9605_u65B9_u6CD5"><a href="#u67E5_u627E_u8BA2_u9605_u65B9_u6CD5" class="headerlink" title="查找订阅方法"></a>查找订阅方法</h4><p>&#160;&#160;&#160;&#160;在调用<code>eventBus.register(object)</code>方法之后，会利用工具类<code>SubscriberMethodFinder</code>来找到object类中所有符合规范的<code>@Subscribe</code>方法，整个过程有两种方式来实现，一种是利用反射，另外一种是利用提供的<code>SubscriberInfoIndex</code>。</p>
<p>&#160;&#160;&#160;&#160;<code>SubscribeMethodFinder</code>类中主要的方法就是<code>findSubscriberMethods()</code>方法。</p>
<pre><code>List&lt;SubscriberMethod&gt; findSubscriberMethods(Class&lt;?&gt; subscriberClass) {
    List&lt;SubscriberMethod&gt; subscriberMethods = METHOD_CACHE.get(subscriberClass);
    if (subscriberMethods != null) {
        return subscriberMethods;
    }

    if (ignoreGeneratedIndex) {
        subscriberMethods = findUsingReflection(subscriberClass);
    } else {
        subscriberMethods = findUsingInfo(subscriberClass);
    }
    if (subscriberMethods.isEmpty()) {
        throw new EventBusException(&quot;Subscriber &quot; + subscriberClass
                + &quot; and its super classes have no public methods with the @Subscribe annotation&quot;);
    } else {
        METHOD_CACHE.put(subscriberClass, subscriberMethods);
        return subscriberMethods;
    }
}
</code></pre><p>&#160;&#160;&#160;&#160;先在<code>METHOD_CACHE</code>这个Map中去寻找内存中是否具有对应类中已找到的方法的缓存列表，如果之前查找过这个类中符合要求的方法，直接返回方法列表。如果没有内存缓存，根据变量<code>ignoreGeneratedIndex</code>来选择不同方式去检测订阅方法，接着将找到的方法列表放入到<code>METHOD_CACHE</code>这个map中作缓存。</p>
<h4 id="u5229_u7528_u53CD_u5C04"><a href="#u5229_u7528_u53CD_u5C04" class="headerlink" title="利用反射"></a>利用反射</h4><p>&#160;&#160;&#160;&#160;利用反射来查找订阅方法的函数为<code>findUsingReflection()</code></p>
<pre><code>private List&lt;SubscriberMethod&gt; findUsingReflection(Class&lt;?&gt; subscriberClass) {
    FindState findState = prepareFindState();
    findState.initForSubscriber(subscriberClass);
    while (findState.clazz != null) {
        findUsingReflectionInSingleClass(findState);
        findState.moveToSuperclass();
    }
    return getMethodsAndRelease(findState);
}
</code></pre><p>&#160;&#160;&#160;&#160;在里面涉及到了一个<code>FindState</code>类，用来辅助对一个类中的订阅方法的查找，算是包装了一些map以及list数据结构来存储找到的方法。<code>EventBus</code>每次对一个类进行订阅方法查找的时候都会用一个<code>FindState</code>类实例来辅助查找，因此对这个类的复用自然很正常，后面的<code>prepareFindState()</code>方法验证了这个事实：</p>
<pre><code>private FindState prepareFindState() {
    synchronized (FIND_STATE_POOL) {
        for (int i = 0; i &lt; POOL_SIZE; i++) {
            FindState state = FIND_STATE_POOL[i];
            if (state != null) {
                FIND_STATE_POOL[i] = null;
                return state;
            }
        }
    }
    return new FindState();
}
</code></pre><p>&#160;&#160;&#160;&#160;<code>FIND_STATE_POOL</code>为一个大小为<code>POOL_SIZE == 4</code>的<code>FindState</code>数组，用来复用<code>FindState</code>的实例。</p>
<p>&#160;&#160;&#160;&#160;在<code>FindState</code>实例准备好之后就开始递归的查找订阅方法，从当前的类开始调用<code>findUsingReflectionInSingleClass()</code>方法，然后去超找其父类中是否存在订阅方法，直到<code>moveToSuperclass()</code>将<code>clazz</code>置为null为止。</p>
<pre><code>void moveToSuperclass() {
        if (skipSuperClasses) {
            clazz = null;
        } else {
            clazz = clazz.getSuperclass();
            String clazzName = clazz.getName();
            /** Skip system classes, this just degrades performance. */
            if (clazzName.startsWith(&quot;java.&quot;) || clazzName.startsWith(&quot;javax.&quot;) || clazzName.startsWith(&quot;android.&quot;)) {
                clazz = null;
            }
        }
    }
</code></pre><p>&#160;&#160;&#160;&#160;<code>findUsingReflectionInSingleClass()</code>方法里面通过反射获取到了类中的所有方法，然后再慢慢的通过几个条件进行筛选，是否具有<code>@OnSubscribe</code>注解，是否为<code>public</code>方法等等，满足条件的方法才会被加入到<code>FindState</code>实例中的数据结构中。到最后所有满足条件的订阅方法都存放在了<code>FindState</code>的实例中，返回即可。</p>
<h4 id="u5229_u7528SubscriberInfoIndex"><a href="#u5229_u7528SubscriberInfoIndex" class="headerlink" title="利用SubscriberInfoIndex"></a>利用SubscriberInfoIndex</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/07/EventBus解析-三-查找Subscribe方法/" data-id="cis0edblr0016zyutoe3flksq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/EventBus/">EventBus</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-View事件分发机制" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/06/View事件分发机制/" class="article-date">
  <time datetime="2016-03-06T13:38:54.000Z" itemprop="datePublished">2016-03-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/06/View事件分发机制/">View事件分发机制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="View_u4E8B_u4EF6_u6D41_u6E90_u7801_u5206_u6790"><a href="#View_u4E8B_u4EF6_u6D41_u6E90_u7801_u5206_u6790" class="headerlink" title="View事件流源码分析"></a>View事件流源码分析</h2><ol>
<li><p><strong>public boolean dispatchTouchEvent(MotionEvent ev)</strong></p>
<p> &#160;&#160;&#160;&#160;用来进行事件的分发，如果事件传递给当前的View，这个方法将在第一个被调用，返回结果受当前的onTouchEvent和下级View的dispatchTouchEvent方法的影响，表示是否消耗当前事件。</p>
</li>
<li><p><strong>public boolean onInterceptTouchEvent(MotionEvent event)</strong></p>
<p> &#160;&#160;&#160;&#160;在上述方法内部调用，用来判断是否拦截某个事件，如果当前View拦截了某个事件，那么在同一个事件序列当中，此方法不会被再次调用，返回结果表示是否拦截当前事件。</p>
</li>
<li><p><strong>public boolean onTouchEvent(MotionEvent event)</strong></p>
<p> &#160;&#160;&#160;&#160;在dispatchTouchEvent方法中调用，用来处理点击时间，返回结果表示是否消耗当前事件，如果不消耗，则在同一个事件序列中，当前View无法再次接收到事件。</p>
</li>
</ol>
        
          <p class="article-more-link">
            <a href="/2016/03/06/View事件分发机制/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/06/View事件分发机制/" data-id="cis0edbli000qzyuty4h5jfvd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/View/">View</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/EventBus/">EventBus</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/View/">View</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Volley/">Volley</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebView/">WebView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net/">net</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/others/">others</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wechat/">wechat</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/EventBus/" style="font-size: 16.67px;">EventBus</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/LeetCode/" style="font-size: 13.33px;">LeetCode</a> <a href="/tags/View/" style="font-size: 10px;">View</a> <a href="/tags/Volley/" style="font-size: 20px;">Volley</a> <a href="/tags/WebView/" style="font-size: 10px;">WebView</a> <a href="/tags/net/" style="font-size: 10px;">net</a> <a href="/tags/others/" style="font-size: 10px;">others</a> <a href="/tags/wechat/" style="font-size: 10px;">wechat</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">9</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/08/31/89_Gray Code/">Gray Code</a>
          </li>
        
          <li>
            <a href="/2016/08/19/关于正则表达式(Regular Expression)/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/08/18/Android中图片的加载/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/07/27/[译]ProtocolBuffers脚本生成代码/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/07/27/JitPack使用/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Xiaoxiaoda<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>